(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor"],{"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"11e9":function(t,e,n){var i=n("52a7"),r=n("4630"),c=n("6821"),o=n("6a99"),a=n("69a8"),s=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=c(t),e=o(e,!0),s)try{return l(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},"1c73":function(t,e,n){"use strict";var i=n("c2e6"),r=n.n(i);r.a},"3b2b":function(t,e,n){var i=n("7726"),r=n("5dbc"),c=n("86cc").f,o=n("9093").f,a=n("aae3"),s=n("0bfb"),l=i.RegExp,u=l,f=l.prototype,d=/a/g,p=/a/g,m=new l(d)!==d;if(n("9e1e")&&(!m||n("79e5")(function(){return p[n("2b4c")("match")]=!1,l(d)!=d||l(p)==p||"/a/i"!=l(d,"i")}))){l=function(t,e){var n=this instanceof l,i=a(t),c=void 0===e;return!n&&i&&t.constructor===l&&c?t:r(m?new u(i&&!c?t.source:t,e):u((i=t instanceof l)?t.source:t,i&&c?s.call(t):e),n?this:f,l)};for(var h=function(t){t in l||c(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},_=o(u),v=0;_.length>v;)h(_[v++]);f.constructor=l,l.prototype=f,n("2aba")(i,"RegExp",l)}n("7a56")("RegExp")},"49d7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Editor"},[n("section",{staticClass:"Editor__area"},[n("section",[n("span",[t._v("标题：")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.articleInfo.title,expression:"articleInfo.title",modifiers:{trim:!0}}],staticClass:"Editor-input",attrs:{placeholder:"请输入标题",spellcheck:"false",type:"text"},domProps:{value:t.articleInfo.title},on:{input:function(e){e.target.composing||t.$set(t.articleInfo,"title",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),n("section",{staticClass:"Editor-sec"},[n("span",[t._v("标签：")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.articleInfo.tag,expression:"articleInfo.tag"}],staticClass:"Editor-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.articleInfo,"tag",e.target.multiple?n:n[0])}}},t._l(t.tags,function(e,i){return n("option",{key:"tags|"+i,domProps:{value:e,innerHTML:t._s(e)}})}))]),n("p",[t._v("内容：")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.articleInfo.content,expression:"articleInfo.content"}],staticClass:"Editor-textarea",style:{height:t.clientHeight+"px"},attrs:{spellcheck:"false"},domProps:{value:t.articleInfo.content},on:{input:function(e){e.target.composing||t.$set(t.articleInfo,"content",e.target.value)}}}),n("input",{staticClass:"Editor-btn",attrs:{type:"button",value:"保存"},on:{click:t.saveArticle}})]),n("ArticleCard",{ref:"ArticleCard",attrs:{item:t.articleInfo}})],1)},r=[],c=(n("3b2b"),n("a481"),n("c93e")),o=n("365c"),a=n("2f62"),s=n("d4bc"),l={asyncData:function(t){var e=t.store,n=t.route;return n.params._id?e.dispatch("FETCH_ARTICLE",{_id:n.params._id}):Promise.resolve()},data:function(){return{articleInfo:{title:void 0,tag:void 0,content:void 0,sec:void 0},tags:["迷思","技艺"],timer:void 0,clientHeight:300,statusClient:!1}},components:{ArticleCard:s["a"]},created:function(){},mounted:function(){this.statusClient=!0,this.loginStatus||(alert("请先登录！"),document.localName.href=history.go(-1)),document.onkeydown=function(){if(9==event.keyCode)return!1},this.$route.params._id&&(this.articleInfo=Object(c["a"])({},this.article(this.$route.params._id)))},methods:{checkInfo:function(){return this.articleInfo.title?this.articleInfo.tag?!!this.articleInfo.content||(alert("内容不能为空！"),!1):(alert("请选择标签！"),!1):(alert("请输入标题！"),!1)},saveArticle:function(){this.checkInfo()&&(this.articleInfo.sec=this.articleSec(),this.$route.params._id?this.API_PUT_ARTICLE():this.API_POST_ARTICLE())},articleSec:function(){var t=document.querySelector(".ArticleCard__content");return t=t.innerText.replace(new RegExp(/\n/g)," "),t.slice(0,300)},API_PUT_ARTICLE:function(){var t=this;Object(o["f"])(this.articleInfo).then(function(e){var n=e.data,i=e.code,r=e.msg;"1"===i?(alert("修改成功！"),t.$store.commit("SET_ARTICLE_ID",t.articleInfo),t.$store.commit("UPDATE_ARTICLES"),t.$router.push({name:"article",params:{_id:n._id}})):alert(r)}).catch()},API_POST_ARTICLE:function(){var t=this;Object(o["c"])(this.articleInfo).then(function(e){var n=e.data,i=e.code,r=e.msg;"1"===i?(alert("创建成功！"),t.$store.commit("SET_ARTICLE_ID",t.articleInfo),t.$store.commit("UPDATE_ARTICLES"),t.$router.push({name:"article",params:{_id:n._id}})):alert(r)}).catch()}},watch:{content:function(){var t=this;this.statusClient&&(clearTimeout(this.timer),this.timer=setTimeout(function(){t.$refs.ArticleCard.marked(),t.clientHeight=Math.max(300,document.querySelector(".ArticleCard__content")?document.querySelector(".ArticleCard__content").clientHeight:300)},500))}},computed:Object(c["a"])({content:function(){return this.articleInfo.content}},Object(a["b"])(["article","loginStatus"]))},u=l,f=(n("8573"),n("2877")),d=Object(f["a"])(u,i,r,!1,null,"a4ab3e46",null);d.options.__file="Editor.vue";e["default"]=d.exports},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,n){var i=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var c,o=e.constructor;return o!==n&&"function"==typeof o&&(c=o.prototype)!==n.prototype&&i(c)&&r&&r(t,c),t}},"7bb1":function(t,e,n){},8573:function(t,e,n){"use strict";var i=n("7bb1"),r=n.n(i);r.a},"8b97":function(t,e,n){var i=n("d3f4"),r=n("cb7c"),c=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return c(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:c}},9093:function(t,e,n){var i=n("ce10"),r=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},aae3:function(t,e,n){var i=n("d3f4"),r=n("2d95"),c=n("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==r(t))}},c2e6:function(t,e,n){},d4bc:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"ArticleCard"},[n("h2",[t._v(t._s(t.item.title||"标题"))]),n("p",{staticClass:"ArticleCard__info"},[n("span",{staticClass:"ArticleCard__info__tag"},[t._v(t._s(t.item.tag||"标签"))]),t._v("\n        "+t._s(t.item.updateTime||"20XX-XX-XX")+"\n    ")]),n("p",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"ArticleCard__content",domProps:{innerHTML:t._s(t.content||"内容")}})])},r=[],c=(n("ac6a"),{name:"ArticleCard",data:function(){return{content:void 0}},directives:{highlight:function(t){if(window&&window.hljs){var e=t.querySelectorAll("pre code"),n=window.hljs;e.forEach(function(t){n.highlightBlock(t)})}}},props:{item:{type:Object,default:function(){return{title:"标题",tag:"标签",updateTime:"20XX-XX-XX",content:"内容"}}}},methods:{marked:function(){var t=window.marked;t&&this.item.content&&(this.content=t(this.item.content))}},created:function(){this.content=this.item.content},mounted:function(){this.marked()}}),o=c,a=(n("1c73"),n("2877")),s=Object(a["a"])(o,i,r,!1,null,"af2f2e8c",null);s.options.__file="ArticleCard.vue";e["a"]=s.exports}}]);
//# sourceMappingURL=editor.2aa223f6.js.map